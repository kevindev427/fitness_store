{% extends '_base.html' %}

{% load static i18n %}

{% block head_title %}{% trans test.name %} - {% trans "Add Result" %}{% endblock head_title %}

{% block header %}
<meta name="description" property="og:description" content="Add a test result">
<meta name="keywords" content="fitness, health, strength, endurance, running, training, biking">
<meta name="author" content="{{ test.author }}">
<meta property="og:title" content="{{ test.name }}" />
{% endblock header %}

{% block content %}

<h1>{{ test.name }}</h1>

<p>{{ test.description }}</p>

<form action="" method="post">
  {% csrf_token %}
  {{ formset.as_p }}
  <button type="submit">Add Result</button>
</form>

<hr>

<button type="button" hx-get="{% url 'tracking:result_create_form' pk=test.pk %}" hx-target="#resultforms" hx-swap="beforeend">
    Add form
</button>

<div id="resultforms"></div>

{% endblock content %}

<!-- JavaScript -->
{% block javascript %}
<script src="{% static 'js/htmx.min.js' %}"></script>
<script>
  document.body.addEventListener('htmx:configRequest', (event) => {
    event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
  })
</script>

{% endblock javascript %}
